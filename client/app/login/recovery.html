<div class="grid-block">
	<div class="grid-content">

	  <h1>Password Recovery</h1>

	  <form name="form" role="form" ng-submit="$.submitForm()" novalidate>
		  <div ng-switch="$.step">

			  <div ng-switch-when="afterUpdate">
			  	<p>{{$.serverResponse}}</p>
			  	<a ui-sref="login">Go to login page</a>
			  </div>

			  <div ng-switch-when="afterRequest">
			  	<p>{{$.serverResponse}}</p>
			  </div>

			  <div ng-switch-when="beforeUpdate">
			  	<label>
					Please type in your new password :
					<input type="password" name="password" placeholder="password" ng-model="$.newPassword" required>
					<p ng-show="form.password.$dirty && form.password.$error.required">Password is required.</p>
					<p ng-show="form.password.$error.server && form.$invalid">{{form.password.$error.message}}</p>
				</label>
				<button 
			      	type="submit" 
			      	class="button medium" 
			      	ng-class="{ 'disabled': form.$invalid }"
			    >Next</button>
			   </div><!-- /.ng-switch-when-beforeUpdate --> 

			  <div ng-switch-default>
			  	<label>
					Email
					<input type="email" name="email" placeholder="email" ng-model="$.email" required>
					<p ng-show="form.email.$dirty && form.email.$error.required">Email is required.</p>
					<p ng-show="form.email.$dirty && form.email.$invalid && !form.email.$error.server">Enter a valid email.</p>
					<p ng-show="form.email.$error.server && form.$invalid">{{form.email.$error.message}}</p>
				</label>
				<button 
			      	type="submit" 
			      	class="button medium" 
			      	ng-class="{ 'disabled': form.$invalid }"
			    >Next</button>
			   </div><!-- /.ng-switch-default -->

		  </div><!-- /.ng-switch -->
	  </form>
	</div><!-- /.grid-content -->
</div><!-- /.grid-block -->

<!-- <pre>{{form | json}}</pre> -->